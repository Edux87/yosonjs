define([
    '../../src/comps/comunicator.js'
],
function(Comunicator){
    var objComunicator;

    beforeEach(function(){
        objComunicator = new Comunicator();
    });

    describe('specComunicator', function(){

        it('should be subscribe a method', function(){
            var eventName = "fakeMethod";
            var fakeMethodSelf = function(){};
            objComunicator.subscribe([eventName], fakeMethodSelf, this);

            var existMethod = objComunicator.eventAlreadyRegistered(eventName);
            expect(existMethod).toBeTruthy();
        });

        it('should be publish a method', function(){
            var eventName = "fakeMethod";
            var methodSpy = jasmine.createSpy("methodSpy");
            objComunicator.subscribe([eventName], methodSpy, this);
            objComunicator.publish(eventName);
            expect(methodSpy).toHaveBeenCalled();
        });

        it('should be work when passing arguments in publish', function(){
            var argsOfevent = [3, 5];
            var eventName = "fakeMethod";
            var methodSpy = jasmine.createSpy("methodSpy");
            objComunicator.subscribe([eventName], methodSpy, this);
            objComunicator.publish(eventName, argsOfevent);
            expect(methodSpy).toHaveBeenCalled();
            expect(methodSpy).toHaveBeenCalledWith(3, 5);
        });

        describe("Validate the arguments", function(){
            it('should be return empty array when no exists arguments', function(){
                expect(objComunicator.validateArguments()).toBe(jasmine.any("Array"));
            });

            it('should be return an array of the arguments', function(){
                var args = ["argument1", "argument2", "argument2"];
                expect(objComunicator.validateArguments(args)).toBe(args);
            });
        });

        it('should be stop an event subscribed', function(){
            var eventName = "methodToStop";
            var methodSpy = jasmine.createSpy("methodSpy");
            objComunicator.subscribe([eventName], methodSpy, this);
            objComunicator.stopSubscribe([ eventName ]);
            expect(objComunicator.getEvent(eventName)).toBeNull();
        });

    });
});
